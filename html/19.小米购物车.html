
<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>小米购物车</title>
		<style type="text/css">
			*{margin: 0;padding: 0;}
			body{
				font: 14px/1.5 "Helvetica Neue",Helvetica,Arial,"Microsoft Yahei","Hiragino Sans GB","Heiti SC","WenQuanYi Micro Hei",sans-serif;;
				color: #333;
				min-width: 1226px;
			}
			header{
				height: 100px;
				border-bottom: 2px solid #FF6700;
			}
			#head{
				width: 1226px;
				height: 74px;
				margin: 0 auto;
				display: flex;
				justify-content: space-between;
				align-items: flex-end;
			}
			.logo{
				width: 96px;
				height: 48px;
			}
			.headLeft{
				display: flex;
				align-items: flex-end;
			}
			.headLeft h2{
				color: #424242;
				font-size: 28px;
				font-weight: normal;
			}
			.headLeft p{
				margin: 20px 0 5px 15px;
			}
			.headRight{
				margin-bottom: 5px;
			}
			#container{
				background: #F5F5F5;
				min-height: 500px;
				padding: 38px 0;
			}
			#warp{
				width: 1226px;
				min-height: 500px;
				margin: 0 auto;
				background: #fff;
			}
			.description{
				height: 70px;
				border-bottom: 1px solid #E0E0E0;
				display: flex;
				
			}
			.description div{
				display: flex;
				align-items: center;
				height: 70px;
			}
			.description div:nth-of-type(1){
				width: 230px;
				padding: 0 0 0 24px;
			}
			.description div:nth-of-type(2){
				width: 380px;
			}
			.description div:nth-of-type(3){
				width: 158px;
				justify-content: center;
			}
			.description div:nth-of-type(4){
				width: 150px;
				justify-content: center;

			}
			.description div:nth-of-type(5){
				width: 201px;
				justify-content: center;

			}
			.description div:nth-of-type(6){
				width: 80px;
				justify-content: center;
			}
			.item{
				display: flex;
				/* justify-content: space-around; */
				height: 117px;
				padding: 15px 0;
				box-sizing: border-box;
				border-bottom: 1px solid #E0E0E0;
				font-size: 18px;
			}
			.item div{
				display: flex;
				align-items: center;
			}
			.item div:nth-of-type(1){
				width: 110px;
				padding: 25px;
			}
			.item div:nth-of-type(2){
				width: 500px;
			}
			.item div:nth-of-type(3){
				width: 158px;
				justify-content: center;
				
			}
			.item div:nth-of-type(4){
				width: 150px;
				justify-content: center;
			}
			.item div:nth-of-type(4) button{
				width: 20px;
				padding: 0 5px;
				margin: 0 5px;
			}
			.item div:nth-of-type(5){
				width: 201px;
				justify-content: center;
			}
			.item div:nth-of-type(5) input{
				width: 150px;
				height: 30px;
				font-size: 16px;
			}
			.item div:nth-of-type(6){
				width: 80px;
				justify-content: center;
			}
			#footer{
				height: 70px;
				display: flex;
				justify-content: space-around;
			}
			#footer div{
				font-size: 20px;
				display: flex;
				align-items: center;
			}
		</style>
	</head>
	<body>
		<header>
			<div id="head">
				<div class="headLeft">
					<div class="logo">
						<img src="img/logo-footer.png" width="48px" >
					</div>
					
					<h2>我的购物车</h2>
					<p>温馨提示：产品是否购买成功，以最终下单为准哦，请尽快结算</p>
					
				</div>
				<div class="headRight">
					820465223 |我的订单
				</div>
				
			</div>
		</header>
		<div id="container">
			<div id="warp">
				<div class="description">
					<div>
						<label><input type="checkbox" id="checkAll" /> 全选</label>
					</div>
					<div>
						商品名称
					</div>
					<div>
						单价
					</div>
					<div>
						数量
					</div>
					<div>
						小计
					</div>
					<div>
						操作
					</div>
				</div>
				<div class="item">
					<div>
						<input type="checkbox" class="checkboxs" />
					</div>
					<div>
						<img src="img/telPhone.jpg" >
						<p>Redmi K20 全网通版 8GB+256GB 冰川...</p>
					</div>
					<div>
						<span class="price">2999</span>元
					</div>
					<div>
						<button class="minus">-</button>
						<span class="piece">0</span>件
						<button class="plus">+</button>
					</div>
					<div>
						<input type="text" disabled="disabled" value="0" class="smallCount" />
					</div>
					<div>
						x
					</div>
				</div>
				
				<div class="item">
					<div>
						<input type="checkbox" class="checkboxs" />
					</div>
					<div>
						<img src="img/chongdianbao.jpg" >
						<p>小米二合一移动电源（充电器）白色</p>
					</div>
					<div>
						<span class="price">89</span>元
					</div>
					<div>
						<button class="minus">-</button>
						<span class="piece">0</span>件
						<button class="plus">+</button>
					</div>
					<div>
						<input type="text" disabled="disabled" value="0" class="smallCount" />
					</div>
					<div>
						x
					</div>
				</div>
				
				<div class="item">
					<div>
						<input type="checkbox" class="checkboxs" />
					</div>
					<div>
						<img src="img/xiaomi%20pro.jpg" >
						<p>15.6 Pro i5 8G 1050MAX 256G</p>
					</div>
					<div>
						<span class="price">5999</span>元
					</div>
					<div>
						<button class="minus">-</button>
						<span class="piece">0</span>件
						<button class="plus">+</button>
					</div>
					<div>
						<input type="text" disabled="disabled" value="0" class="smallCount" />
					</div>
					<div>
						x
					</div>
				</div>
				
				<div id="footer">
					<div>商品总计: <span class="total_piece">0</span></div>
					<div>商品总价: <span class="total_price">0</span></div>
				</div>
			</div>
		</div>
	</body>
</html>
<script>
	window.onload = function() {
		var oMinus = document.querySelectorAll(".minus"); //减号
		var oPlus = document.querySelectorAll(".plus"); //加号
		var oPiece = document.querySelectorAll(".piece"); //件数
		var oPrice = document.querySelectorAll(".price"); //单价
		var smallCount = document.querySelectorAll(".smallCount"); //小计
		var totalPiece = document.querySelector(".total_piece"); //总计
		var totalPrice = document.querySelector(".total_price"); //总价
		var checkAll = document.querySelector('#checkAll');
		var checkBox = document.querySelectorAll('.checkboxs');
		
		//全选/全不选功能
		checkAll.onclick = function() {
			totalPiece.innerHTML = 0;	//总计置为0
			totalPrice.innerHTML = 0;	//总价置为0
			for (i = 0; i < checkBox.length; i++) {
				checkBox[i].checked = this.checked;
				if(this.checked){
					totalPiece.innerHTML = Number(totalPiece.innerHTML) + Number(oPiece[i].innerHTML);
					totalPrice.innerHTML = Number(totalPrice.innerHTML) + Number(smallCount[i].value);
				}else{
					totalPiece.innerHTML = 0;
					totalPrice.innerHTML = 0; //总价
				}
			}
		}
		//选项全选中,全选按钮也选中功能
		for (var i = 0; i < checkBox.length; i++) {
			checkBox[i].onchange = function() {
				var count = 0; 
				for (var j = 0; j < checkBox.length; j++) { //遍历checkBox
					if (checkBox[j].checked == true) { //如果状态为选中，count+1
						count++;
					}
					if (count == checkBox.length) { //如果被选中的个数等于checkBox的长度
						checkAll.checked = true; //全选checkbox选中
					} else {
						checkAll.checked = false; //全选checkbox不选中
					}
				}
				
			}
		}


		//加减号功能开始
		for (var i = 0; i < oPlus.length; i++) {
			oPlus[i].index = i;
			oMinus[i].index = i;
			checkBox[i].index = i;
			oPlus[i].onclick = function() {
				oPiece[this.index].innerHTML = Number(oPiece[this.index].innerHTML) + 1; //件数
				smallCount[this.index].value = Number(oPiece[this.index].innerHTML) * oPrice[this.index].innerHTML; //小计
				if(checkBox[this.index].checked){
					totalPiece.innerHTML++;
					totalPrice.innerHTML = Number(totalPrice.innerHTML) + Number(oPrice[this.index].innerHTML);
				}
				
			}
			oMinus[i].onclick = function() {
				if (oPiece[this.index].innerHTML > 0) {
					oPiece[this.index].innerHTML = Number(oPiece[this.index].innerHTML) - 1; //件数
					smallCount[this.index].value = Number(oPiece[this.index].innerHTML) * oPrice[this.index].innerHTML; //小计
					if(checkBox[this.index].checked){
						totalPiece.innerHTML--;
						totalPrice.innerHTML = Number(totalPrice.innerHTML) - Number(oPrice[this.index].innerHTML);
					}
				} else {
					alert("已经没有东西,不要减了");
				}
			}
			//input勾选/不勾选功能开始
			checkBox[i].onclick = function(){
				if(this.checked){
					totalPiece.innerHTML = Number(totalPiece.innerHTML) + Number(oPiece[this.index].innerHTML);
					totalPrice.innerHTML = Number(totalPrice.innerHTML) + Number(smallCount[this.index].value);
				}else{
					totalPiece.innerHTML = Number(totalPiece.innerHTML) - Number(oPiece[this.index].innerHTML);
					totalPrice.innerHTML = Number(totalPrice.innerHTML) - Number(smallCount[this.index].value);
				}
			}
			//input勾选/不勾选功能结束
		}
		//加减号功能结束
	}
</script>
